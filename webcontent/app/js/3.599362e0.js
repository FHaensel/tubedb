(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"51f7":function(e,t,a){"use strict";a("d91b")},"5e02":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"hHh LpR fFf"}},[a("q-header",{staticClass:"bg-grey-7 text-grey-4",attrs:{reveal:"",elevated:""}},[a("q-toolbar",{staticClass:"fit row wrap justify-center items-start content-start title"},[a("div",{staticClass:"text-h5"},[e._v("TubeDB Diagram")])])],1),void 0!==e.model?a("q-drawer",{attrs:{"show-if-above":"",side:"left",behavior:"desktop","content-class":"bg-grey-4",width:e.drawerWidth}},[a("div",{staticClass:"fit row"},[a("q-scroll-area",{staticClass:"col-grow"}),a("div",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:e.onChangeDrawerWidth,expression:"onChangeDrawerWidth",modifiers:{prevent:!0,mouse:!0}}],staticClass:"drawerChanger"})],1)]):e._e(),a("q-page-container",[a("div",{ref:"diagram"})])],1)},s=[],i=(a("c35a"),a("e6cf"),a("ddb0"),a("ded3")),o=a.n(i),n=a("2f62"),d=a("5698"),l=a("c71e");a("28d5");function c(e){let t,a,r,s,i,o,n=e.factor||.75;function d(e,t,a,r,s,i){return e>r?(t=s,a=i):t<s?(t=s,a=s+e):a>i&&(a=i,t=i-e),[t,a]}return{hooks:{ready:e=>{t=e.scales.x.min,a=e.scales.x.max,r=e.scales.y.min,s=e.scales.y.max,i=a-t,o=s-r;let l=e.root.querySelector(".u-over"),c=l.getBoundingClientRect();l.addEventListener("mousedown",(t=>{if(1===t.button){t.preventDefault();let s=t.clientX,i=e.scales.x.min,o=e.scales.x.max,n=e.posToVal(1,"x")-e.posToVal(0,"x");function a(t){t.preventDefault();let a=t.clientX,r=n*(a-s);e.setScale("x",{min:i-r,max:o-r})}function r(e){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)}document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)}})),l.addEventListener("wheel",(l=>{l.preventDefault();let{left:m,top:h}=e.cursor,u=m/c.width,p=1-h/c.height,v=e.posToVal(m,"x"),w=e.posToVal(h,"y"),f=e.scales.x.max-e.scales.x.min,g=e.scales.y.max-e.scales.y.min,b=l.deltaY<0?f*n:f/n,x=v-u*b,y=x+b;[x,y]=d(b,x,y,i,t,a);let E=l.deltaY<0?g*n:g/n,T=w-p*E,C=T+E;[T,C]=d(E,T,C,o,r,s),e.batch((()=>{e.setScale("x",{min:x,max:y})}))}))}}}}var m={data(){return{drawerWidth:400,data:void 0}},computed:o()(o()({},Object(n["c"])({model:e=>e.model.data,modelLoading:e=>e.model.loading,modelError:e=>e.model.error})),Object(n["b"])({api:"api",apiGET:"apiGET"})),methods:{onChangeDrawerWidth(e){var t=e.delta.x;this.drawerWidth+=t,this.drawerWidth<30&&(this.drawerWidth=30),this.drawerWidth>800&&(this.drawerWidth=800)},createDiagram(){if(void 0===this.data)return;let e={title:"My Chart",id:"chart1",class:"my-chart",width:800,height:600,plugins:[c({factor:.75})],series:[{},{show:!0,spanGaps:!1,label:"Value",value:(e,t)=>t,stroke:"red",width:1}]};this.$refs.diagram.innderHTML="",new l["a"](e,this.data,this.$refs.diagram)}},watch:{async model(){if(void 0!==this.model)try{var e={plot:"AEG01",sensor:"Ta_200",aggregation:"hour",interpolated:!1,quality:"step",width:1890,height:100,by_year:!0,connection:"step",raw_connection:"curve",value:"line",raw_value:"point",datetime_format:"timestamp"};console.time("apiGET");var t=await this.apiGET(["tsdb","query_csv"],{params:e});console.timeEnd("apiGET"),console.time("csvParseRows");var a=d["a"](t.data);console.timeEnd("csvParseRows"),console.time("prepare"),a.shift();var r=a.map((e=>60*(e[0]-36819360-60))),s=a.map((e=>"NA"===e[1]?null:Number.parseFloat(e[1])));this.data=[r,s],console.timeEnd("prepare")}catch(i){console.log(i)}},data(){this.createDiagram()}},async mounted(){this.$store.dispatch("model/init"),this.createDiagram()}},h=m,u=(a("51f7"),a("2877")),p=a("4d5a"),v=a("e359"),w=a("65c6"),f=a("9404"),g=a("4983"),b=a("09e3"),x=a("75c3"),y=a("eebe"),E=a.n(y),T=Object(u["a"])(h,r,s,!1,null,"422d4111",null);t["default"]=T.exports;E()(T,"components",{QLayout:p["a"],QHeader:v["a"],QToolbar:w["a"],QDrawer:f["a"],QScrollArea:g["a"],QPageContainer:b["a"]}),E()(T,"directives",{TouchPan:x["a"]})},d91b:function(e,t,a){}}]);