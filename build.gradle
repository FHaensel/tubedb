apply plugin: 'java'

dependencies.compile fileTree('lib')

sourceSets.main.java.srcDir 'src'

jar {
	from file('src/log4j2.xml')
	destinationDir file('package')
	
	manifest {	
        attributes 	'Built-Date': new Date(),
					'Built-JDK': System.getProperty('java.version')
    }
}

tasks.withType(JavaCompile){
    //options.deprecation = true
	//options.listFiles = true
	//options.verbose = true
}

task clean_package(type: Delete) {
  delete 'package'
}

task copy_lib(type: Copy) {
	from files(configurations.runtime)
    into 'package/lib'
}

task copy_add(type: Copy) {
	from fileTree('add')
	into 'package'
}

task copy_add_windows(type: Copy) {
	from fileTree('add_windows')
	into 'package'
}

task copy_add_linux(type: Copy) {
	from fileTree('add_linux')
	into 'package'
}

task copy_webcontent(type: Copy) {
	from fileTree('webcontent')
	into 'package/webcontent'
}

task copy_build(type: Copy, dependsOn: [jar]) {
	from fileTree('build/libs')
	into 'package'
}

task copy_config(type: Copy, dependsOn: [jar]) {
	from fileTree('config')
	into 'package/config'
}

task _build_package(dependsOn:[ clean_package, copy_build, copy_lib, copy_webcontent, copy_add, copy_config, copy_add_linux ]) {
}

task _build_package_windows(dependsOn:[ clean_package, copy_build, copy_lib, copy_webcontent, copy_add, copy_config, copy_add_windows ]) {
}